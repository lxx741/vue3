{"version":3,"file":"reactivity.cjs.js","sources":["../../shared/src/index.ts","../src/operates.ts","../src/effect.ts","../src/baseHandler.ts","../src/reactivity.ts","../src/ref.ts","../src/computed.ts"],"sourcesContent":["export const assign = Object.assign\r\nexport const isArray = Array.isArray\r\nexport const isObject = (val) => typeof val == 'object' && val != null\r\nexport const isFunction = val => typeof val == 'function'\r\nexport const isNumber = val => typeof val == 'number'\r\nexport const isString = val => typeof val == 'string'\r\nexport const isIntegerKey = val => parseInt(val) + '' == val\r\n// export const hasOwn = (target, key) => Object.prototype.hasOwnProperty.call(target, key)\r\nexport const hasProperty = Reflect.has\r\nexport const hasChanged = (oldVal, newVal) => oldVal !== newVal","export enum TrackOpTypes {\r\n  GET\r\n}\r\n\r\nexport enum TriggerOpTypes {\r\n  ADD,\r\n  SET\r\n}","import { isArray, isIntegerKey } from \"@vue/shared\"\r\nimport { TriggerOpTypes } from \"./operates\"\r\n\r\n/**\r\n * 副作用函数\r\n * - 传入的回调函数中会使用响应式数据，即会触发代理对象的 get 方法\r\n * - 依赖收集：响应式属性和回调函数就会存在依赖关系（响应式对象的属性在回调中使用，回调函数中使用了响应式数据）\r\n * - 触发依赖：响应式数据变化会触发响应式对象的 set 方法\r\n * @param fn 回调函数\r\n * @param options 参数选项\r\n * @returns 响应式的effect\r\n */\r\nexport function effect(fn, options: any = {}) {\r\n  const effect = createReactiveEffect(fn, options)\r\n  if (!options.lazy) {\r\n    effect()\r\n  }\r\n  return effect\r\n}\r\n\r\nlet uid = 0\r\nlet activeEffect // 存储当前effect\r\nconst effectStack = [] // 解决effect嵌套调用问题\r\nfunction createReactiveEffect(fn, options) {\r\n  const effect = function reactiveEffect() {\r\n    // 去重effect，不要存储相同的 effect\r\n    if (!effectStack.includes(effect)) {\r\n      try {\r\n        effectStack.push(effect)\r\n        activeEffect = effect\r\n        return fn()\r\n      } finally {\r\n        effectStack.pop()\r\n        activeEffect = effectStack[effectStack.length - 1]\r\n      }\r\n    }\r\n\r\n  }\r\n  effect.id = uid++\r\n  effect._isEffect = true\r\n  effect.raw = fn\r\n  effect.options = options\r\n  return effect\r\n}\r\n\r\n// 用来存储哪个对象(target)中的哪个属性(dep)对应的副作用(effect)\r\nlet targetMap = new WeakMap\r\n// 收集依赖：将响应式数据与副作用函数关联起来\r\nexport function track(target, type, key) {\r\n  // 响应式数据不在effect中使用就不用关联effect\r\n  if (activeEffect == null) return\r\n  let depsMap = targetMap.get(target)\r\n  if (!depsMap) {\r\n    targetMap.set(target, (depsMap = new Map))\r\n  }\r\n  let effects = depsMap.get(key)\r\n  if (!effects) {\r\n    depsMap.set(key, (effects = new Set))\r\n  }\r\n  effects.add(activeEffect)\r\n}\r\n\r\n\r\nexport function trigger(target, type, key?, newVal?, oldVal?) {\r\n  let depsMap = targetMap.get(target)\r\n  if (!depsMap) return // target 没有在 effect 中使用，直接返回\r\n\r\n  let newEffects = new Set // 存储将要被执行的 effect\r\n  const addEffect = (effects) => {\r\n    if (effects) {\r\n      effects.forEach(effect => newEffects.add(effect))\r\n    }\r\n  }\r\n  // 修改的是 数组的 length 属性\r\n  if (key == 'length' && isArray(target)) {\r\n    depsMap.forEach((effects, key) => {\r\n      if (key == 'length' || key > newVal) {\r\n        // effect 中使用了数组的 length 属性或者数组的索引，改变的数组的长度小于使用的索引\r\n        addEffect(effects)\r\n      }\r\n    });\r\n  } else {\r\n    if (key != null) { // 修改对象属性\r\n      addEffect(depsMap.get(key))\r\n    }\r\n\r\n    // effect 中使用了数组本身(会收集每个索引和length属性)，修改了数组不存在的索引(新增了大于数组长度的索引)\r\n    if (type == TriggerOpTypes.ADD && isArray(target) && isIntegerKey(key)) {\r\n      addEffect(depsMap.get('length'))\r\n    }\r\n  }\r\n\r\n  newEffects.forEach((effecf: any) => {\r\n    if (effecf.options.scheduler) {\r\n      effecf.options.scheduler()\r\n    } else {\r\n      effecf()\r\n    }\r\n  })\r\n}","import { hasChanged, hasProperty, isArray, isIntegerKey, isObject } from \"@vue/shared\"\r\nimport { track, trigger } from \"./effect\";\r\nimport { TrackOpTypes, TriggerOpTypes } from \"./operates\";\r\nimport { reactive, readonly } from \"./reactivity\"\r\n\r\n\r\nfunction createGetter(isReadonly = false, isShallow = false) {\r\n  return function get(target, key, receiver) {  // 当给代理对象上的属性设置值时会走 set 方法\r\n    let res = Reflect.get(target, key, receiver)\r\n    if (!isReadonly) { // 不是仅读，可能会改，要收集依赖\r\n      track(target, TrackOpTypes.GET, key) // effect中取了哪个对象中的哪个属性\r\n    }\r\n    if (isShallow) return res // 是浅的直接返回第一层属性的值\r\n    if (isObject(res)) { // 不是浅的且是对象进一步进行对象的代理，所以vue3是懒代理模式，而vue2是一上来就把data中的数据递归定义成响应式数据\r\n      return isReadonly ? readonly(res) : reactive(res)\r\n    }\r\n    return res\r\n  }\r\n}\r\n\r\nfunction createSetter(isShallow = false) {\r\n  return function set(target, key, val, receiver) { // 当访问代理对象上的属性时会走 get 方法\r\n    let oldVal = target[key]\r\n    let hasKey = isArray(target) && isIntegerKey(key)\r\n      ? Number(key) < target.length // 修改的key是数组的索引，并且已存在该索引，即为修改该索引上的值\r\n      : hasProperty(target, key) // 对象上是否存在该属性，存在为修改，不存在为新增\r\n    let res = Reflect.set(target, key, val, receiver)\r\n    if (!hasKey) {\r\n      // 新增：对象上没有该属性，数组上没有该索引\r\n      trigger(target, TriggerOpTypes.ADD, key, val)\r\n    } else if (hasChanged(oldVal, val)) {\r\n      // 修改：对象上有该属性且值不相等，数组有该索引且值不相等\r\n      trigger(target, TriggerOpTypes.SET, key, val, oldVal)\r\n    }\r\n    return res\r\n  }\r\n}\r\n\r\nconst reactiveGet = createGetter()\r\nconst shallowReactiveGet = createGetter(false, true)\r\nconst readonlyGet = createGetter(true)\r\nconst shallowReadonlyGet = createGetter(true, true)\r\n\r\nconst reactiveSet = createSetter()\r\nconst shallowReactiveSet = createSetter(true)\r\n\r\nexport const reactiveHandler = {\r\n  get: reactiveGet,\r\n  set: reactiveSet\r\n}\r\nexport const shallowReactiveHandler = {\r\n  get: shallowReactiveGet,\r\n  set: shallowReactiveSet\r\n}\r\nexport const readonlyHandler = {\r\n  get: readonlyGet,\r\n  set(target) {\r\n    console.warn(target, `为仅读对象，不可设置`);\r\n  }\r\n}\r\nexport const shallowReadonlyHandler = {\r\n  get: shallowReadonlyGet,\r\n  set(target) {\r\n    console.warn(target, `为仅读对象，不可设置`);\r\n  }\r\n}","import { isObject } from \"@vue/shared\"\r\n\r\nimport { reactiveHandler, shallowReactiveHandler, readonlyHandler, shallowReadonlyHandler } from './baseHandler'\r\n\r\n// 创建代理对象\r\nexport function reactive(target) {\r\n  return reacteReactiveObject(target, false, reactiveHandler)\r\n}\r\n\r\n// 创建浅的代理对象\r\nexport function shallowReactive(target) {\r\n  return reacteReactiveObject(target, false, shallowReactiveHandler)\r\n}\r\n\r\n// 创建仅读代理对象\r\nexport function readonly(target) {\r\n  return reacteReactiveObject(target, true, readonlyHandler)\r\n}\r\n\r\n// 创建浅的仅读代理对象\r\nexport function shallowReadonly(target) {\r\n  return reacteReactiveObject(target, true, shallowReadonlyHandler)\r\n}\r\n\r\nconst reactiveMap = new WeakMap // 缓存代理对象\r\nconst readonlyMap = new WeakMap // 缓存仅读代理对象\r\n/**\r\n * 创建响应式对象\r\n * @param target 被代理对象\r\n * @param isReadonly 是否仅读\r\n * @param baseHandler 代理对象的处理器对象\r\n */\r\nexport function reacteReactiveObject(target, isReadonly, baseHandler) {\r\n  if (!isObject(target)) return target // 被代理的数据需要是个对象，否则直接返回该数据\r\n  let proxyMap = isReadonly ? readonlyMap : reactiveMap\r\n  let existProxy = proxyMap.get(target)\r\n  if (existProxy) return existProxy // 已经被代理过的对象直接返回\r\n  let proxy = new Proxy(target, baseHandler)\r\n  proxyMap.set(target, proxy)\r\n  return proxy\r\n}","import { hasChanged, isArray, isObject } from \"@vue/shared\"\r\nimport { track, trigger } from \"./effect\"\r\nimport { TrackOpTypes, TriggerOpTypes } from \"./operates\"\r\nimport { reactive } from \"./reactivity\"\r\n\r\nexport function ref(rawVal) {\r\n  return createRef(rawVal)\r\n}\r\n\r\nexport function shallowRef(rawVal) {\r\n  return createRef(rawVal, true)\r\n}\r\n\r\nconst convert = val => isObject(val) ? reactive(val) : val\r\nclass RefImpl {\r\n  public _value\r\n  public __v_isRef = true\r\n  constructor(public rawValue, public shallow) {\r\n\r\n    this._value = shallow ? rawValue : convert(rawValue)\r\n  }\r\n\r\n  get value() {\r\n    track(this, TrackOpTypes.GET, 'value')\r\n    return this._value\r\n  }\r\n  set value(newVal) {\r\n    if (hasChanged(newVal, this._value)) {\r\n      this._value = this.shallow ? newVal : convert(newVal)\r\n      trigger(this, TriggerOpTypes.SET, 'value', newVal)\r\n    }\r\n  }\r\n}\r\n\r\nexport function createRef(rawVal, shallow = false) {\r\n  return new RefImpl(rawVal, shallow)\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  public __v_isRef = true\r\n  constructor(public target, public key) { }\r\n  get value() {\r\n    return this.target[this.key]\r\n  }\r\n  set value(newVal) {\r\n    this.target[this.key] = newVal\r\n  }\r\n}\r\n\r\n// 将对象中的某个属性的值变成响应式的数据\r\nexport function toRef(target, key) {\r\n  return new ObjectRefImpl(target, key)\r\n}\r\n\r\n// 将对象中多个属性值批量变成响应式的数据\r\nexport function toRefs(obj) {\r\n  let res = isArray(obj) ? new Array(obj.length) : {}\r\n  for (let key in obj) {\r\n    res[key] = toRef(obj, key)\r\n  }\r\n  return res\r\n}","import { isFunction } from \"@vue/shared\"\r\nimport { effect, track, trigger } from \"./effect\"\r\nimport { TrackOpTypes, TriggerOpTypes } from \"./operates\"\r\n\r\nclass CompuntedRefImpl {\r\n  public _dirty = true // 默认为true，脏的，做缓存\r\n  public _value // 保存计算属性的值\r\n  public effect // 副作用函数\r\n\r\n  constructor(public getter, public setter) {\r\n    // 默认创建一个effect\r\n    this.effect = effect(getter, {\r\n      lazy: true, // 懒执行\r\n      scheduler: () => { // 自定义\r\n        if (!this._dirty) {\r\n          this._dirty = true\r\n          trigger(this, TriggerOpTypes.SET, 'value') // 触发effect\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  get value() {\r\n    if (this._dirty) {\r\n      this._value = this.effect()\r\n      this._dirty = false\r\n    }\r\n    track(this, TrackOpTypes.GET, 'value') // 收集 effect\r\n    return this._value\r\n  }\r\n\r\n  set value(newVal) {\r\n    this.setter(newVal)\r\n  }\r\n}\r\n\r\n// 计算属性，可能接收一个函数或一个对象(包括getter、setter)\r\nexport function computed(getterOrOptions) {\r\n  let getter, setter\r\n\r\n  if (isFunction(getterOrOptions)) {\r\n    getter = getterOrOptions\r\n    setter = () => { }\r\n  } else {\r\n    getter = getterOrOptions.get\r\n    setter = getterOrOptions.set\r\n  }\r\n\r\n  // 创建一个计算属性的ref\r\n  return new CompuntedRefImpl(getter, setter)\r\n}"],"names":[],"mappings":"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"}